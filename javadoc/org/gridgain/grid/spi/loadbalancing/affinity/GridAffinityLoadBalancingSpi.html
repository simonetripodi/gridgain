<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_24) on Sun Jun 05 17:19:38 PDT 2011 -->
<TITLE>
GridAffinityLoadBalancingSpi (GridGain 3.1 API)
</TITLE>

<META NAME="date" CONTENT="2011-06-05">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../../../javadoc.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="GridAffinityLoadBalancingSpi (GridGain 3.1 API)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

<link type='text/css' rel='stylesheet' href='http://www.gridgain.com/sh3.0/styles/shCore.css'/>
<link type='text/css' rel='stylesheet' href='http://www.gridgain.com/sh3.0/styles/shThemeEclipse.css'/>
<script type='text/javascript' src='http://www.gridgain.com/sh3.0/src/shCore.js'></script>
<script type='text/javascript' src='http://www.gridgain.com/sh3.0/src/shLegacy.js'></script>
<script type='text/javascript' src='http://www.gridgain.com/sh3.0/scripts/shBrushJava.js'></script>
<script type='text/javascript' src='http://www.gridgain.com/sh3.0/scripts/shBrushPlain.js'></script>
<script type='text/javascript' src='http://www.gridgain.com/sh3.0/scripts/shBrushJScript.js'></script>
<script type='text/javascript' src='http://www.gridgain.com/sh3.0/scripts/shBrushXml.js'></script>
<script type='text/javascript' src='http://www.gridgain.com/sh3.0/scripts/shBrushScala.js'></script>
<script type='text/javascript' src='http://www.gridgain.com/sh3.0/scripts/shBrushGroovy.js'></script>
</head>


<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/GridAffinityLoadBalancingSpi.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>

                    
                        GridGain&#153; 3.1.1c
                        <br>
                        Community Edition
                    
                </EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../../org/gridgain/grid/spi/loadbalancing/affinity/GridAffinityJobAdapter.html" title="class in org.gridgain.grid.spi.loadbalancing.affinity"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../../../org/gridgain/grid/spi/loadbalancing/affinity/GridAffinityLoadBalancingSpiMBean.html" title="interface in org.gridgain.grid.spi.loadbalancing.affinity"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../../index.html?org/gridgain/grid/spi/loadbalancing/affinity/GridAffinityLoadBalancingSpi.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="GridAffinityLoadBalancingSpi.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.gridgain.grid.spi.loadbalancing.affinity</FONT>
<BR>
Class GridAffinityLoadBalancingSpi</H2>
<PRE>
<A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</A>
  <IMG SRC="../../../../../../resources/inherit.gif" ALT="extended by "><A HREF="../../../../../../org/gridgain/grid/spi/GridSpiAdapter.html" title="class in org.gridgain.grid.spi">org.gridgain.grid.spi.GridSpiAdapter</A>
      <IMG SRC="../../../../../../resources/inherit.gif" ALT="extended by "><B>org.gridgain.grid.spi.loadbalancing.affinity.GridAffinityLoadBalancingSpi</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD><A HREF="../../../../../../org/gridgain/grid/spi/GridSpi.html" title="interface in org.gridgain.grid.spi">GridSpi</A>, <A HREF="../../../../../../org/gridgain/grid/spi/GridSpiJsonConfigurable.html" title="interface in org.gridgain.grid.spi">GridSpiJsonConfigurable</A>, <A HREF="../../../../../../org/gridgain/grid/spi/GridSpiManagementMBean.html" title="interface in org.gridgain.grid.spi">GridSpiManagementMBean</A>, <A HREF="../../../../../../org/gridgain/grid/spi/loadbalancing/affinity/GridAffinityLoadBalancingSpiMBean.html" title="interface in org.gridgain.grid.spi.loadbalancing.affinity">GridAffinityLoadBalancingSpiMBean</A>, <A HREF="../../../../../../org/gridgain/grid/spi/loadbalancing/GridLoadBalancingSpi.html" title="interface in org.gridgain.grid.spi.loadbalancing">GridLoadBalancingSpi</A></DD>
</DL>
<HR>
<DL>
<DT><PRE><FONT SIZE="-1"><A HREF="../../../../../../org/gridgain/grid/spi/GridSpiInfo.html" title="annotation in org.gridgain.grid.spi">@GridSpiInfo</A>(<A HREF="../../../../../../org/gridgain/grid/spi/GridSpiInfo.html#author()">author</A>="GridGain Systems, Inc.",
             <A HREF="../../../../../../org/gridgain/grid/spi/GridSpiInfo.html#url()">url</A>="www.gridgain.com",
             <A HREF="../../../../../../org/gridgain/grid/spi/GridSpiInfo.html#email()">email</A>="support@gridgain.com",
             <A HREF="../../../../../../org/gridgain/grid/spi/GridSpiInfo.html#version()">version</A>="3.1.1c.05062011")
<A HREF="../../../../../../org/gridgain/grid/spi/GridSpiMultipleInstancesSupport.html" title="annotation in org.gridgain.grid.spi">@GridSpiMultipleInstancesSupport</A>(<A HREF="../../../../../../org/gridgain/grid/spi/GridSpiMultipleInstancesSupport.html#value()">value</A>=true)
</FONT>public class <B>GridAffinityLoadBalancingSpi</B><DT>extends <A HREF="../../../../../../org/gridgain/grid/spi/GridSpiAdapter.html" title="class in org.gridgain.grid.spi">GridSpiAdapter</A><DT>implements <A HREF="../../../../../../org/gridgain/grid/spi/loadbalancing/GridLoadBalancingSpi.html" title="interface in org.gridgain.grid.spi.loadbalancing">GridLoadBalancingSpi</A>, <A HREF="../../../../../../org/gridgain/grid/spi/loadbalancing/affinity/GridAffinityLoadBalancingSpiMBean.html" title="interface in org.gridgain.grid.spi.loadbalancing.affinity">GridAffinityLoadBalancingSpiMBean</A></DL>
</PRE>

<P>
Load balancing SPI which uses data affinity for routing jobs to remote nodes. It provides
 ability to <b>collocate computations with data</b>. This SPI
 is best used with distributed caches for which it is really important that computation
 is routed exactly to the node on which data is cached. Many data cache schemes
 can take advantage of this SPI, distributed, or invalidation based. The real value is
 that you now can partition your database between data servers and hence load
 the whole database into memory for faster access.
 <p>
 <h1 class="header">Architecture and Deployment</h1>
 The diagram below illustrates the difference between using data grids without
 and with GridGain. The left side shows execution flow without GridGain, in which
 a remote data server is queried for data, the data is then delivered to caller (master)
 node, which is faster than DB access, but results into unnecessary network traffic.
 <p>
 On the right hand side, you can see the value that GridGain brings to the picture. The
 whole computation logic together with data access logic is brought to data server
 for local execution. Assuming that serialization of computation logic is much lighter
 than serializing data, the network traffic in this case is minimal. Also, your computation
 may access data from both, Node 2 and Node 3. In this case, GridGain will split your
 computation into logical jobs and route appropriate logical jobs to the corresponding
 data servers to ensure that all computations still remain local. Now, if one of the
 data server nodes crashes, your jobs will be automatically failed-over to other nodes,
 which allows you to fail-over logic together with data (not just data fail-over provided
 by data grids or distributed caches).
 <p>
 <center>
 <img src="http://www.gridgain.com/images/affinity_white.gif" alt="Data Partitioning and Affinity ForkJoin"/>
 </center>
 <p>
 <h1 class="header">Coding Example</h1>
 To use load balancers for your job routing, in your <A HREF="../../../../../../org/gridgain/grid/GridTask.html#map(java.util.List, T)"><CODE>GridTask.map(List, Object)</CODE></A>
 implementation use load balancer to find out the node this job should be routed to
 (see <A HREF="../../../../../../org/gridgain/grid/resources/GridLoadBalancerResource.html" title="annotation in org.gridgain.grid.resources"><CODE>GridLoadBalancerResource</CODE></A> documentation for information on how a load balancer
 can be injected into your task. However, the preferred way here is to use
 <A HREF="../../../../../../org/gridgain/grid/GridTaskSplitAdapter.html" title="class in org.gridgain.grid"><CODE>GridTaskSplitAdapter</CODE></A>, as it will handle affinity assignment of jobs to nodes
 automatically. Node that when working with affinity load balancing, your task's
 <code>map(..)</code> or <code>split(..)</code> methods should return <A HREF="../../../../../../org/gridgain/grid/spi/loadbalancing/affinity/GridAffinityJob.html" title="interface in org.gridgain.grid.spi.loadbalancing.affinity"><CODE>GridAffinityJob</CODE></A> instances
 instead of <A HREF="../../../../../../org/gridgain/grid/GridJob.html" title="interface in org.gridgain.grid"><CODE>GridJob</CODE></A> ones. <A HREF="../../../../../../org/gridgain/grid/spi/loadbalancing/affinity/GridAffinityJob.html" title="interface in org.gridgain.grid.spi.loadbalancing.affinity"><CODE>GridAffinityJob</CODE></A> adds one additional
 method to grid job: <A HREF="../../../../../../org/gridgain/grid/spi/loadbalancing/affinity/GridAffinityJob.html#getAffinityKey()"><CODE>GridAffinityJob.getAffinityKey()</CODE></A> which will allow GridGain to
 properly route the job with the same key to the same grid node every time. In case if regular
 <A HREF="../../../../../../org/gridgain/grid/GridJob.html" title="interface in org.gridgain.grid"><CODE>GridJob</CODE></A> is returned, not the <A HREF="../../../../../../org/gridgain/grid/spi/loadbalancing/affinity/GridAffinityJob.html" title="interface in org.gridgain.grid.spi.loadbalancing.affinity"><CODE>GridAffinityJob</CODE></A>, it will be routed to a randomly
 picked node.
 Here is an example of a grid task that uses affinity load balancing. Note how load balancing
 jobs is absolutely transparent to the user and is simply a matter of proper grid configuration.
 <pre name="code" class="java">
 public class MyFooBarAffinityTask extends GridTaskSplitAdapter&lt;List&lt;Integer&gt;,Object&gt; {
    // For this example we receive a list of cache keys and for every key
    // create a job that accesses it.
    &#64;Override
    protected Collection&lt;? extends GridJob&gt; split(int gridSize, List&lt;Integer&gt; cacheKeys) throws GridException {
        List&lt;MyGridAffinityJob&gt; jobs = new ArrayList&lt;MyGridAffinityJob&gt;(gridSize);

        for (Integer cacheKey : cacheKeys) {
            jobs.add(new MyGridAffinityJob(cacheKey));
        }

        // Node assignment via load balancer
        // happens automatically.
        return jobs;
    }
    ...
 }
 </pre>
 Here is the example of grid jobs created by the task above:
 <pre name="code" class="java">
 public class MyGridAffinityJob extends GridAffinityJobAdapter&lt;Integer, Serializable&gt; {
    public MyGridAffinityJob(Integer cacheKey) {
        // Pass cache key as a job argument.
        super(cacheKey);
    }

    public Serializable execute() throws GridException {
        ...
        // Access data by the same key returned
        // in 'getAffinityKey()' method.
        mycache.get(getAffinityKey());
        ...
    }
 }
 </pre>
 <p>
 Also note that there may be cases where your underlying cache product supports multiple
 caches and you need to cache data with identical keys on those caches. Although, it still
 may be OK to return the same key from <A HREF="../../../../../../org/gridgain/grid/spi/loadbalancing/affinity/GridAffinityJob.html#getAffinityKey()"><CODE>GridAffinityJob.getAffinityKey()</CODE></A> method
 for either cache, you may wish to change your affinity key method as follows to make
 sure that affinity load balancing for one cache is independent from another:
 <pre name="code" class="java">
 public class MyFooBarAffinityJob extends GridAffinityJobAdapter&lt;String, Integer&gt; {
    public MyFooBarAffinity(String cacheName, Integer cacheKey) {
        // Construct affinity key by concatenating cache name
        // and affinity key. Note that we also pass cacheKey as
        // argument to access from execute method.
        super(cacheName + '.' + cacheKey, cacheKey);
    }

    &#64;Override
    pubic Serializable execute() {
       ...
       // Access data from your cache by the cache key.
       // The main point to note here is that the same
       // affinity key always corresponds to the same
       // cache key.
       Integer cacheKey = argument();

       Object data = someCache.get(cacheKey);
       ...
       // Do computations.
    }
 }
 </pre>
 <p>
 <h1 class="header">Configuration</h1>
 <h2 class="header">Mandatory</h2>
 This SPI has no mandatory configuration parameters.
 <h2 class="header">Optional</h2>
 The following configuration parameters are optional:
 <ul>
 <li>Virtual node count (see <A HREF="../../../../../../org/gridgain/grid/spi/loadbalancing/affinity/GridAffinityLoadBalancingSpi.html#setVirtualNodeCount(int)"><CODE>GridAffinityLoadBalancingSpi.setVirtualNodeCount(int)</CODE></A>).</li>
 <li>Affinity node attributes (see <A HREF="../../../../../../org/gridgain/grid/spi/loadbalancing/affinity/GridAffinityLoadBalancingSpi.html#setAffinityNodeAttributes(java.util.Map)"><CODE>GridAffinityLoadBalancingSpi.setAffinityNodeAttributes(Map)</CODE></A>).</li>
 <li>Affinity seed (see <A HREF="../../../../../../org/gridgain/grid/spi/loadbalancing/affinity/GridAffinityLoadBalancingSpi.html#setAffinitySeed(java.lang.String)"><CODE>GridAffinityLoadBalancingSpi.setAffinitySeed(String)</CODE></A>).</li>
 </ul>
 Please pay specific attention to the number of virtual nodes for Consistent Hashing algorithm
 (see <A HREF="../../../../../../org/gridgain/grid/spi/loadbalancing/affinity/GridAffinityLoadBalancingSpi.html#setVirtualNodeCount(int)"><CODE>GridAffinityLoadBalancingSpi.setVirtualNodeCount(int)</CODE></A>). The larger the virtual node count, the more
 even the data distribution is across nodes. For best affinity distribution the value
 should usually be larger than <code>500</code>. The default value of <code>1000</code>
 is good enough for most grid deployments. If you set the value
 too large (larger than several thousands), it may cause performance degradation.
 Consistent Hashing algorithm generally yields between
 2% and 4% standard deviation for equal data affinity distribution.
 <p>
 You can use virtual node count to distribute load in uneven grid. Since the larger the
 virtual node count is, the more data will be stored on that node (which leads to more jobs
 sent to that node), <i>nodes that have higher Memory or CPU capacity should have larger
 virtual node count value</i>.
 <p>
 When configuring virtual node count, it is common to assign a certain number of virtual
 nodes to a single unit of capacity characteristic. For example, if you have 3 nodes in
 the grid: N1, N2, and N3, and nodes N1 and N2 have 2GB of memory and node N3 has 3GB of memory,
 then, to ease up calculations, for every 1GB of memory on a node you could assign 500 virtual nodes.
 As a result, nodes N1 and N2 should be assigned <code>1000</code> virtual nodes and node N3 should
 be assigned <code>1500</code> virtual nodes.
 <p>
 Below is a Java example of configuration for Affinity load balancing SPI:
 GridAffinityLoadBalancingSpi spi = new GridAffinityLoadBalancingSpi();
 <pre name="code" class="java">
 GridAffinityLoadBalancingSpi spi = new GridAffinityLoadBalancingSpi();

 // Change number of virtual nodes.
 spi.setVirtualNodeCount(1500);

 GridConfigurationAdapter cfg = new GridConfigurationAdapter();

 // Override default load balancing SPI.
 cfg.setLoadBalancingSpi(spi);

 // Starts grid.
 G.start(cfg);
 </pre>
 Here is Spring XML configuration example:
 <pre name="code" class="xml">
 &lt;property name="loadBalancingSpi">
     &lt;bean class="org.gridgain.grid.spi.loadBalancing.affinity.GridAffinityLoadBalancingSpi"&gt;
         &lt;property name="virtualNodeCount" value="1500"/&gt;

         &lt;!--
             If your grid is segmented via node attributes,
             then provide all attributes a node should have
             in order to be considered by affinity load balancer.
         --&gt;
         &lt;property name="affinityNodeAttributes"&gt;
             &lt;map&gt;
                 &lt;entry key="node.segment" value="foobar"/&gt;
             &lt;/map&gt;
         &lt;/property&gt;
     &lt;/bean&gt;
 &lt;/property&gt;
 </pre>
 <p>
 The implementation utilizes Consistent Hashing algorithm that is best documented in
 <a href="http://weblogs.java.net/blog/tomwhite/archive/2007/11/consistent_hash.html">Tom White's Blog</a>
 (we modified the algorithm to fit better into GridGain).
 <p>
 <img src="http://www.gridgain.com/images/spring-small.png">
 <br>
 For information about Spring framework visit <a href="http://www.springframework.org/">www.springframework.org</a>

                              <p>                             <h2 class='header'>Wiki & Forum:</h2>                             <br>                             <script language="JavaScript" type="text/javascript" src="../../../../../../tools.js"></script>                               <table border=0 cellpadding=0 cellspacing=0>                                   <tr>                                       <td align=left style='padding-right: 10px'>                                           <a target='wiki' href='http://wiki.gridgain.org'>Wiki</a>                                       </td>                                       <td valign=top>                                           <script type='text/javascript'>wikiSearchForm('../../..')</script>                                       </td>                                   </tr>                                   <tr>                                       <td align=left style='padding-right: 10px'>                                           <a target=forum href='http://jive.gridgain.org'>Forum</a>                                       </td>                                       <td valign=top>                                           <script type='text/javascript'>forumSearchForm('../../..')</script                                       </td>                                   </tr>                               </table>
<P>

<P>
<DL>
<map name="umlmapW0H0"><area shape="rect" coords="25,300,186,319" href="../../../../../../org/gridgain/grid/GridLocalEventListener.html"><area shape="rect" coords="33,195,187,214" href="http://java.sun.com/j2se/1.6.0/docs/api/java/util/concurrent/ConcurrentMap.html"><area shape="rect" coords="116,405,194,425" href="http://java.sun.com/j2se/1.6.0/docs/api/java/util/Map.html"><area shape="rect" coords="441,41,549,60" href="../../../../../../org/gridgain/grid/spi/GridSpiAdapter.html"><area shape="rect" coords="372,167,617,190" href="#"><area shape="rect" coords="273,199,487,217" href="#DFLT_VIRTUAL_NODE_COUNT"><area shape="rect" coords="273,220,548,239" href="#VIRTUAL_NODE_COUNT_ATTR_NAME"><area shape="rect" coords="273,248,460,266" href="#GridAffinityLoadBalancingSpi()"><area shape="rect" coords="273,275,663,293" href="#getAffinityNodeAttributes()"><area shape="rect" coords="273,296,426,314" href="#getAffinitySeed()"><area shape="rect" coords="273,317,716,335" href="#getBalancedNode(org.gridgain.grid.GridTaskSession, java.util.List, org.gridgain.grid.GridJob)"><area shape="rect" coords="273,338,548,356" href="#getConsistentAttributeNames()"><area shape="rect" coords="273,359,537,377" href="#getNodeAttributes()"><area shape="rect" coords="273,380,442,398" href="#getVirtualNodeCount()"><area shape="rect" coords="273,401,450,420" href="#onContextDestroyed()"><area shape="rect" coords="273,423,532,441" href="#onContextInitialized(org.gridgain.grid.spi.GridSpiContext)"><area shape="rect" coords="273,444,686,462" href="#setAffinityNodeAttributes(java.util.Map)"><area shape="rect" coords="273,465,449,483" href="#setAffinitySeed(java.lang.String)"><area shape="rect" coords="273,486,465,504" href="#setVirtualNodeCount(int)"><area shape="rect" coords="273,507,408,525" href="#spiStart(java.lang.String)"><area shape="rect" coords="273,528,375,546" href="#spiStop()"><area shape="rect" coords="273,549,384,568" href="#toString()"><area shape="rect" coords="265,131,513,149" href="package-summary.html"><area shape="rect" coords="433,6,555,24" href="../../../../../../org/gridgain/grid/spi/package-summary.html"><area shape="rect" coords="105,370,154,388" href="http://java.sun.com/j2se/1.6.0/docs/api/java/util/package-summary.html"><area shape="rect" coords="14,159,128,178" href="http://java.sun.com/j2se/1.6.0/docs/api/java/util/concurrent/package-summary.html"><area shape="rect" coords="6,265,107,283" href="../../../../../../org/gridgain/grid/package-summary.html"></map>
<map name="umlmapW1H0"><area shape="rect" coords="214,273,329,293" href="../../../../../../org/gridgain/grid/GridTaskSession.html"><area shape="rect" coords="209,234,277,253" href="../../../../../../org/gridgain/grid/GridNode.html"><area shape="rect" coords="208,195,263,214" href="../../../../../../org/gridgain/grid/GridJob.html"><area shape="rect" coords="208,379,264,398" href="http://java.sun.com/j2se/1.6.0/docs/api/java/util/List.html"><area shape="rect" coords="47,41,294,60" href="../../../../../../org/gridgain/grid/spi/loadbalancing/affinity/GridAffinityLoadBalancingSpiMBean.html"><area shape="rect" coords="380,41,532,60" href="../../../../../../org/gridgain/grid/spi/loadbalancing/GridLoadBalancingSpi.html"><area shape="rect" coords="-212,167,32,190" href="#"><area shape="rect" coords="-311,199,-97,217" href="#DFLT_VIRTUAL_NODE_COUNT"><area shape="rect" coords="-311,220,-36,239" href="#VIRTUAL_NODE_COUNT_ATTR_NAME"><area shape="rect" coords="-311,248,-124,266" href="#GridAffinityLoadBalancingSpi()"><area shape="rect" coords="-311,275,78,293" href="#getAffinityNodeAttributes()"><area shape="rect" coords="-311,296,-158,314" href="#getAffinitySeed()"><area shape="rect" coords="-311,317,131,335" href="#getBalancedNode(org.gridgain.grid.GridTaskSession, java.util.List, org.gridgain.grid.GridJob)"><area shape="rect" coords="-311,338,-36,356" href="#getConsistentAttributeNames()"><area shape="rect" coords="-311,359,-47,377" href="#getNodeAttributes()"><area shape="rect" coords="-311,380,-142,398" href="#getVirtualNodeCount()"><area shape="rect" coords="-311,401,-134,420" href="#onContextDestroyed()"><area shape="rect" coords="-311,423,-52,441" href="#onContextInitialized(org.gridgain.grid.spi.GridSpiContext)"><area shape="rect" coords="-311,444,101,462" href="#setAffinityNodeAttributes(java.util.Map)"><area shape="rect" coords="-311,465,-135,483" href="#setAffinitySeed(java.lang.String)"><area shape="rect" coords="-311,486,-119,504" href="#setVirtualNodeCount(int)"><area shape="rect" coords="-311,507,-176,525" href="#spiStart(java.lang.String)"><area shape="rect" coords="-311,528,-209,546" href="#spiStop()"><area shape="rect" coords="-311,549,-200,568" href="#toString()"><area shape="rect" coords="-319,131,-71,149" href="package-summary.html"><area shape="rect" coords="362,6,568,24" href="../../../../../../org/gridgain/grid/spi/loadbalancing/package-summary.html"><area shape="rect" coords="20,6,268,24" href="../../../../../../org/gridgain/grid/spi/loadbalancing/affinity/package-summary.html"><area shape="rect" coords="199,344,248,362" href="http://java.sun.com/j2se/1.6.0/docs/api/java/util/package-summary.html"><area shape="rect" coords="199,159,300,178" href="../../../../../../org/gridgain/grid/package-summary.html"></map>
<map name="umlmapW0H1"><area shape="rect" coords="65,242,146,261" href="../../../../../../org/gridgain/grid/logger/GridLogger.html"><area shape="rect" coords="61,136,165,156" href="http://java.sun.com/j2se/1.6.0/docs/api/java/util/concurrent/locks/ReadWriteLock.html"><area shape="rect" coords="113,31,173,50" href="http://java.sun.com/j2se/1.6.0/docs/api/java/util/Random.html"><area shape="rect" coords="116,-8,194,11" href="http://java.sun.com/j2se/1.6.0/docs/api/java/util/Map.html"><area shape="rect" coords="147,347,191,366" href="http://java.sun.com/j2se/1.6.0/docs/api/java/lang/String.html"><area shape="rect" coords="372,-246,617,-223" href="#"><area shape="rect" coords="273,-214,487,-196" href="#DFLT_VIRTUAL_NODE_COUNT"><area shape="rect" coords="273,-193,548,-174" href="#VIRTUAL_NODE_COUNT_ATTR_NAME"><area shape="rect" coords="273,-165,460,-147" href="#GridAffinityLoadBalancingSpi()"><area shape="rect" coords="273,-138,663,-120" href="#getAffinityNodeAttributes()"><area shape="rect" coords="273,-117,426,-99" href="#getAffinitySeed()"><area shape="rect" coords="273,-96,716,-78" href="#getBalancedNode(org.gridgain.grid.GridTaskSession, java.util.List, org.gridgain.grid.GridJob)"><area shape="rect" coords="273,-75,548,-57" href="#getConsistentAttributeNames()"><area shape="rect" coords="273,-54,537,-36" href="#getNodeAttributes()"><area shape="rect" coords="273,-33,442,-15" href="#getVirtualNodeCount()"><area shape="rect" coords="273,-12,450,6" href="#onContextDestroyed()"><area shape="rect" coords="273,9,532,27" href="#onContextInitialized(org.gridgain.grid.spi.GridSpiContext)"><area shape="rect" coords="273,30,686,48" href="#setAffinityNodeAttributes(java.util.Map)"><area shape="rect" coords="273,51,449,69" href="#setAffinitySeed(java.lang.String)"><area shape="rect" coords="273,72,465,90" href="#setVirtualNodeCount(int)"><area shape="rect" coords="273,93,408,111" href="#spiStart(java.lang.String)"><area shape="rect" coords="273,114,375,132" href="#spiStop()"><area shape="rect" coords="273,135,384,154" href="#toString()"><area shape="rect" coords="265,-282,513,-264" href="package-summary.html"><area shape="rect" coords="139,312,195,330" href="http://java.sun.com/j2se/1.6.0/docs/api/java/lang/package-summary.html"><area shape="rect" coords="105,-43,154,-25" href="http://java.sun.com/j2se/1.6.0/docs/api/java/util/package-summary.html"><area shape="rect" coords="48,101,195,119" href="http://java.sun.com/j2se/1.6.0/docs/api/java/util/concurrent/locks/package-summary.html"><area shape="rect" coords="54,207,195,225" href="../../../../../../org/gridgain/grid/logger/package-summary.html"></map>
<map name="umlmapW1H1"><area shape="rect" coords="213,70,318,89" href="../../../../../../org/gridgain/grid/spi/GridSpiContext.html"><area shape="rect" coords="208,-34,264,-15" href="http://java.sun.com/j2se/1.6.0/docs/api/java/util/List.html"><area shape="rect" coords="-212,-246,32,-223" href="#"><area shape="rect" coords="-311,-214,-97,-196" href="#DFLT_VIRTUAL_NODE_COUNT"><area shape="rect" coords="-311,-193,-36,-174" href="#VIRTUAL_NODE_COUNT_ATTR_NAME"><area shape="rect" coords="-311,-165,-124,-147" href="#GridAffinityLoadBalancingSpi()"><area shape="rect" coords="-311,-138,78,-120" href="#getAffinityNodeAttributes()"><area shape="rect" coords="-311,-117,-158,-99" href="#getAffinitySeed()"><area shape="rect" coords="-311,-96,131,-78" href="#getBalancedNode(org.gridgain.grid.GridTaskSession, java.util.List, org.gridgain.grid.GridJob)"><area shape="rect" coords="-311,-75,-36,-57" href="#getConsistentAttributeNames()"><area shape="rect" coords="-311,-54,-47,-36" href="#getNodeAttributes()"><area shape="rect" coords="-311,-33,-142,-15" href="#getVirtualNodeCount()"><area shape="rect" coords="-311,-12,-134,6" href="#onContextDestroyed()"><area shape="rect" coords="-311,9,-52,27" href="#onContextInitialized(org.gridgain.grid.spi.GridSpiContext)"><area shape="rect" coords="-311,30,101,48" href="#setAffinityNodeAttributes(java.util.Map)"><area shape="rect" coords="-311,51,-135,69" href="#setAffinitySeed(java.lang.String)"><area shape="rect" coords="-311,72,-119,90" href="#setVirtualNodeCount(int)"><area shape="rect" coords="-311,93,-176,111" href="#spiStart(java.lang.String)"><area shape="rect" coords="-311,114,-209,132" href="#spiStop()"><area shape="rect" coords="-311,135,-200,154" href="#toString()"><area shape="rect" coords="-319,-282,-71,-264" href="package-summary.html"><area shape="rect" coords="199,-69,248,-51" href="http://java.sun.com/j2se/1.6.0/docs/api/java/util/package-summary.html"><area shape="rect" coords="199,35,321,53" href="../../../../../../org/gridgain/grid/spi/package-summary.html"></map>
<DT>&nbsp;</DT><DD><CENTER><TABLE BORDER="0" CELLSPACING="0" CELLPADDING="0">
<TR>
<TD><IMG SRC="GridAffinityLoadBalancingSpiW0H0.gif" WIDTH="585" HEIGHT="414" USEMAP="#umlmapW0H0" BORDER="0"></TD>
<TD><IMG SRC="GridAffinityLoadBalancingSpiW1H0.gif" WIDTH="585" HEIGHT="414" USEMAP="#umlmapW1H0" BORDER="0"></TD>
</TR>
<TR>
<TD><IMG SRC="GridAffinityLoadBalancingSpiW0H1.gif" WIDTH="585" HEIGHT="413" USEMAP="#umlmapW0H1" BORDER="0"></TD>
<TD><IMG SRC="GridAffinityLoadBalancingSpiW1H1.gif" WIDTH="585" HEIGHT="413" USEMAP="#umlmapW1H1" BORDER="0"></TD>
</TR>
</TABLE></CENTER></DD>
<!-- generated by yDoc 2.2_02   http://www.yworks.com/products/ydoc/   b0ac8294e767fcbddaa5cfb22a0a433400cb1a73e9aaf7... -->
</DL>
<HR>

<P>
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE CLASS="dotted" BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH CLASS="dotted" ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD CLASS="dotted" ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;int</CODE></FONT></TD>
<TD CLASS="dotted"><CODE><B><A HREF="../../../../../../org/gridgain/grid/spi/loadbalancing/affinity/GridAffinityLoadBalancingSpi.html#DFLT_VIRTUAL_NODE_COUNT">DFLT_VIRTUAL_NODE_COUNT</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Default virtual node count for Consistent Hashing algorithm (value is <code>1000</code>).</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD CLASS="dotted" ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A></CODE></FONT></TD>
<TD CLASS="dotted"><CODE><B><A HREF="../../../../../../org/gridgain/grid/spi/loadbalancing/affinity/GridAffinityLoadBalancingSpi.html#VIRTUAL_NODE_COUNT_ATTR_NAME">VIRTUAL_NODE_COUNT_ATTR_NAME</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Name of node attribute to specify number of replicas for a node.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE CLASS="dotted" BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH CLASS="dotted" ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD CLASS="dotted"><CODE><B><A HREF="../../../../../../org/gridgain/grid/spi/loadbalancing/affinity/GridAffinityLoadBalancingSpi.html#GridAffinityLoadBalancingSpi()">GridAffinityLoadBalancingSpi</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE CLASS="dotted" BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH CLASS="dotted" ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD CLASS="dotted" ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</A><span class='angle_bracket'>&lt;</span><A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>,? extends <A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/io/Serializable.html?is-external=true" title="class or interface in java.io">Serializable</A><span class='angle_bracket'>&gt;</span></CODE></FONT></TD>
<TD CLASS="dotted"><CODE><B><A HREF="../../../../../../org/gridgain/grid/spi/loadbalancing/affinity/GridAffinityLoadBalancingSpi.html#getAffinityNodeAttributes()">getAffinityNodeAttributes</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gets map of node attributes for nodes that should participate in affinity assignment.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD CLASS="dotted" ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A></CODE></FONT></TD>
<TD CLASS="dotted"><CODE><B><A HREF="../../../../../../org/gridgain/grid/spi/loadbalancing/affinity/GridAffinityLoadBalancingSpi.html#getAffinitySeed()">getAffinitySeed</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gets affinity seed used by Consistent Hashing algorithm.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD CLASS="dotted" ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../../../org/gridgain/grid/GridNode.html" title="interface in org.gridgain.grid">GridNode</A></CODE></FONT></TD>
<TD CLASS="dotted"><CODE><B><A HREF="../../../../../../org/gridgain/grid/spi/loadbalancing/affinity/GridAffinityLoadBalancingSpi.html#getBalancedNode(org.gridgain.grid.GridTaskSession, java.util.List, org.gridgain.grid.GridJob)">getBalancedNode</A></B>(<A HREF="../../../../../../org/gridgain/grid/GridTaskSession.html" title="interface in org.gridgain.grid">GridTaskSession</A>&nbsp;ses,
                <A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</A><span class='angle_bracket'>&lt;</span><A HREF="../../../../../../org/gridgain/grid/GridNode.html" title="interface in org.gridgain.grid">GridNode</A><span class='angle_bracket'>&gt;</span>&nbsp;top,
                <A HREF="../../../../../../org/gridgain/grid/GridJob.html" title="interface in org.gridgain.grid">GridJob</A>&nbsp;job)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gets balanced node for specified job within given task session.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD CLASS="dotted" ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</A><span class='angle_bracket'>&lt;</span><A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A><span class='angle_bracket'>&gt;</span></CODE></FONT></TD>
<TD CLASS="dotted"><CODE><B><A HREF="../../../../../../org/gridgain/grid/spi/loadbalancing/affinity/GridAffinityLoadBalancingSpi.html#getConsistentAttributeNames()">getConsistentAttributeNames</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns back a list of attributes that should be consistent
 for this SPI.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD CLASS="dotted" ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</A><span class='angle_bracket'>&lt;</span><A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>,<A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A><span class='angle_bracket'>&gt;</span></CODE></FONT></TD>
<TD CLASS="dotted"><CODE><B><A HREF="../../../../../../org/gridgain/grid/spi/loadbalancing/affinity/GridAffinityLoadBalancingSpi.html#getNodeAttributes()">getNodeAttributes</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method is called before SPI starts (before method <A HREF="../../../../../../org/gridgain/grid/spi/GridSpi.html#spiStart(java.lang.String)"><CODE>GridSpi.spiStart(String)</CODE></A>
 is called).</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD CLASS="dotted" ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD CLASS="dotted"><CODE><B><A HREF="../../../../../../org/gridgain/grid/spi/loadbalancing/affinity/GridAffinityLoadBalancingSpi.html#getVirtualNodeCount()">getVirtualNodeCount</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gets number of virtual nodes for Consistent Hashing
 algorithm.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD CLASS="dotted" ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD CLASS="dotted"><CODE><B><A HREF="../../../../../../org/gridgain/grid/spi/loadbalancing/affinity/GridAffinityLoadBalancingSpi.html#onContextDestroyed()">onContextDestroyed</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Callback invoked prior to stopping grid before SPI context is destroyed.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD CLASS="dotted" ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD CLASS="dotted"><CODE><B><A HREF="../../../../../../org/gridgain/grid/spi/loadbalancing/affinity/GridAffinityLoadBalancingSpi.html#onContextInitialized(org.gridgain.grid.spi.GridSpiContext)">onContextInitialized</A></B>(<A HREF="../../../../../../org/gridgain/grid/spi/GridSpiContext.html" title="interface in org.gridgain.grid.spi">GridSpiContext</A>&nbsp;spiCtx)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Callback invoked when SPI context is initialized.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD CLASS="dotted" ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD CLASS="dotted"><CODE><B><A HREF="../../../../../../org/gridgain/grid/spi/loadbalancing/affinity/GridAffinityLoadBalancingSpi.html#setAffinityNodeAttributes(java.util.Map)">setAffinityNodeAttributes</A></B>(<A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</A><span class='angle_bracket'>&lt;</span><A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>,? extends <A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/io/Serializable.html?is-external=true" title="class or interface in java.io">Serializable</A><span class='angle_bracket'>&gt;</span>&nbsp;affAttrs)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets node attributes for data affinity grid segment.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD CLASS="dotted" ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD CLASS="dotted"><CODE><B><A HREF="../../../../../../org/gridgain/grid/spi/loadbalancing/affinity/GridAffinityLoadBalancingSpi.html#setAffinitySeed(java.lang.String)">setAffinitySeed</A></B>(<A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;affSeed)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets affinity seed used by Consistent Hashing algorithm.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD CLASS="dotted" ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD CLASS="dotted"><CODE><B><A HREF="../../../../../../org/gridgain/grid/spi/loadbalancing/affinity/GridAffinityLoadBalancingSpi.html#setVirtualNodeCount(int)">setVirtualNodeCount</A></B>(int&nbsp;virtualNodeCnt)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets number of virtual nodes for Consistent Hashing algorithm.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD CLASS="dotted" ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD CLASS="dotted"><CODE><B><A HREF="../../../../../../org/gridgain/grid/spi/loadbalancing/affinity/GridAffinityLoadBalancingSpi.html#spiStart(java.lang.String)">spiStart</A></B>(<A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;gridName)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method is called to start SPI.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD CLASS="dotted" ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD CLASS="dotted"><CODE><B><A HREF="../../../../../../org/gridgain/grid/spi/loadbalancing/affinity/GridAffinityLoadBalancingSpi.html#spiStop()">spiStop</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method is called to stop SPI.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD CLASS="dotted" ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A></CODE></FONT></TD>
<TD CLASS="dotted"><CODE><B><A HREF="../../../../../../org/gridgain/grid/spi/loadbalancing/affinity/GridAffinityLoadBalancingSpi.html#toString()">toString</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_org.gridgain.grid.spi.GridSpiAdapter"><!-- --></A>
<TABLE CLASS="dotted" BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH CLASS="dotted" ALIGN="left"><B>Methods inherited from class org.gridgain.grid.spi.<A HREF="../../../../../../org/gridgain/grid/spi/GridSpiAdapter.html" title="class in org.gridgain.grid.spi">GridSpiAdapter</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD CLASS="dotted"><CODE><A HREF="../../../../../../org/gridgain/grid/spi/GridSpiAdapter.html#assertParameter(boolean, java.lang.String)">assertParameter</A>, <A HREF="../../../../../../org/gridgain/grid/spi/GridSpiAdapter.html#configInfo(java.lang.String, java.lang.Object)">configInfo</A>, <A HREF="../../../../../../org/gridgain/grid/spi/GridSpiAdapter.html#createSpiAttributeName(java.lang.String)">createSpiAttributeName</A>, <A HREF="../../../../../../org/gridgain/grid/spi/GridSpiAdapter.html#getAuthor()">getAuthor</A>, <A HREF="../../../../../../org/gridgain/grid/spi/GridSpiAdapter.html#getGridGainHome()">getGridGainHome</A>, <A HREF="../../../../../../org/gridgain/grid/spi/GridSpiAdapter.html#getLocalNodeId()">getLocalNodeId</A>, <A HREF="../../../../../../org/gridgain/grid/spi/GridSpiAdapter.html#getName()">getName</A>, <A HREF="../../../../../../org/gridgain/grid/spi/GridSpiAdapter.html#getSpiContext()">getSpiContext</A>, <A HREF="../../../../../../org/gridgain/grid/spi/GridSpiAdapter.html#getStartTimestamp()">getStartTimestamp</A>, <A HREF="../../../../../../org/gridgain/grid/spi/GridSpiAdapter.html#getStartTimestampFormatted()">getStartTimestampFormatted</A>, <A HREF="../../../../../../org/gridgain/grid/spi/GridSpiAdapter.html#getUpTime()">getUpTime</A>, <A HREF="../../../../../../org/gridgain/grid/spi/GridSpiAdapter.html#getUpTimeFormatted()">getUpTimeFormatted</A>, <A HREF="../../../../../../org/gridgain/grid/spi/GridSpiAdapter.html#getVendorEmail()">getVendorEmail</A>, <A HREF="../../../../../../org/gridgain/grid/spi/GridSpiAdapter.html#getVendorUrl()">getVendorUrl</A>, <A HREF="../../../../../../org/gridgain/grid/spi/GridSpiAdapter.html#getVersion()">getVersion</A>, <A HREF="../../../../../../org/gridgain/grid/spi/GridSpiAdapter.html#injectables()">injectables</A>, <A HREF="../../../../../../org/gridgain/grid/spi/GridSpiAdapter.html#registerMBean(java.lang.String, T, java.lang.Class)">registerMBean</A>, <A HREF="../../../../../../org/gridgain/grid/spi/GridSpiAdapter.html#setJson(java.lang.String)">setJson</A>, <A HREF="../../../../../../org/gridgain/grid/spi/GridSpiAdapter.html#setName(java.lang.String)">setName</A>, <A HREF="../../../../../../org/gridgain/grid/spi/GridSpiAdapter.html#startInfo()">startInfo</A>, <A HREF="../../../../../../org/gridgain/grid/spi/GridSpiAdapter.html#startStopwatch()">startStopwatch</A>, <A HREF="../../../../../../org/gridgain/grid/spi/GridSpiAdapter.html#stopInfo()">stopInfo</A>, <A HREF="../../../../../../org/gridgain/grid/spi/GridSpiAdapter.html#unregisterMBean()">unregisterMBean</A></CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE CLASS="dotted" BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH CLASS="dotted" ALIGN="left"><B>Methods inherited from class java.lang.<A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD CLASS="dotted"><CODE><A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</A>, <A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</A>, <A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</A>, <A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</A>, <A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</A>, <A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</A>, <A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</A>, <A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</A>, <A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</A>, <A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/lang/Object.html?is-external=true#wait(long, int)" title="class or interface in java.lang">wait</A></CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_org.gridgain.grid.spi.GridSpi"><!-- --></A>
<TABLE CLASS="dotted" BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH CLASS="dotted" ALIGN="left"><B>Methods inherited from interface org.gridgain.grid.spi.<A HREF="../../../../../../org/gridgain/grid/spi/GridSpi.html" title="interface in org.gridgain.grid.spi">GridSpi</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD CLASS="dotted"><CODE><A HREF="../../../../../../org/gridgain/grid/spi/GridSpi.html#getName()">getName</A></CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_org.gridgain.grid.spi.GridSpiJsonConfigurable"><!-- --></A>
<TABLE CLASS="dotted" BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH CLASS="dotted" ALIGN="left"><B>Methods inherited from interface org.gridgain.grid.spi.<A HREF="../../../../../../org/gridgain/grid/spi/GridSpiJsonConfigurable.html" title="interface in org.gridgain.grid.spi">GridSpiJsonConfigurable</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD CLASS="dotted"><CODE><A HREF="../../../../../../org/gridgain/grid/spi/GridSpiJsonConfigurable.html#setJson(java.lang.String)">setJson</A></CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_org.gridgain.grid.spi.GridSpiManagementMBean"><!-- --></A>
<TABLE CLASS="dotted" BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH CLASS="dotted" ALIGN="left"><B>Methods inherited from interface org.gridgain.grid.spi.<A HREF="../../../../../../org/gridgain/grid/spi/GridSpiManagementMBean.html" title="interface in org.gridgain.grid.spi">GridSpiManagementMBean</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD CLASS="dotted"><CODE><A HREF="../../../../../../org/gridgain/grid/spi/GridSpiManagementMBean.html#getAuthor()">getAuthor</A>, <A HREF="../../../../../../org/gridgain/grid/spi/GridSpiManagementMBean.html#getGridGainHome()">getGridGainHome</A>, <A HREF="../../../../../../org/gridgain/grid/spi/GridSpiManagementMBean.html#getLocalNodeId()">getLocalNodeId</A>, <A HREF="../../../../../../org/gridgain/grid/spi/GridSpiManagementMBean.html#getName()">getName</A>, <A HREF="../../../../../../org/gridgain/grid/spi/GridSpiManagementMBean.html#getStartTimestamp()">getStartTimestamp</A>, <A HREF="../../../../../../org/gridgain/grid/spi/GridSpiManagementMBean.html#getStartTimestampFormatted()">getStartTimestampFormatted</A>, <A HREF="../../../../../../org/gridgain/grid/spi/GridSpiManagementMBean.html#getUpTime()">getUpTime</A>, <A HREF="../../../../../../org/gridgain/grid/spi/GridSpiManagementMBean.html#getUpTimeFormatted()">getUpTimeFormatted</A>, <A HREF="../../../../../../org/gridgain/grid/spi/GridSpiManagementMBean.html#getVendorEmail()">getVendorEmail</A>, <A HREF="../../../../../../org/gridgain/grid/spi/GridSpiManagementMBean.html#getVendorUrl()">getVendorUrl</A>, <A HREF="../../../../../../org/gridgain/grid/spi/GridSpiManagementMBean.html#getVersion()">getVersion</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE CLASS="dotted" BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH CLASS="dotted" ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="DFLT_VIRTUAL_NODE_COUNT"><!-- --></A><H3>
DFLT_VIRTUAL_NODE_COUNT</H3>
<PRE>
public static final int <B>DFLT_VIRTUAL_NODE_COUNT</B></PRE>
<DL>
<DD>Default virtual node count for Consistent Hashing algorithm (value is <code>1000</code>).
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../../../constant-values.html#org.gridgain.grid.spi.loadbalancing.affinity.GridAffinityLoadBalancingSpi.DFLT_VIRTUAL_NODE_COUNT">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="VIRTUAL_NODE_COUNT_ATTR_NAME"><!-- --></A><H3>
VIRTUAL_NODE_COUNT_ATTR_NAME</H3>
<PRE>
public static final <A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A> <B>VIRTUAL_NODE_COUNT_ATTR_NAME</B></PRE>
<DL>
<DD>Name of node attribute to specify number of replicas for a node.
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../../../constant-values.html#org.gridgain.grid.spi.loadbalancing.affinity.GridAffinityLoadBalancingSpi.VIRTUAL_NODE_COUNT_ATTR_NAME">Constant Field Values</A></DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE CLASS="dotted" BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH CLASS="dotted" ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="GridAffinityLoadBalancingSpi()"><!-- --></A><H3>
GridAffinityLoadBalancingSpi</H3>
<PRE>
public <B>GridAffinityLoadBalancingSpi</B>()</PRE>
<DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE CLASS="dotted" BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH CLASS="dotted" ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="getVirtualNodeCount()"><!-- --></A><H3>
getVirtualNodeCount</H3>
<PRE>
public int <B>getVirtualNodeCount</B>()</PRE>
<DL>
<DD>Gets number of virtual nodes for Consistent Hashing
 algorithm. For more information about algorithm, see
 <a href="http://weblogs.java.net/blog/tomwhite/archive/2007/11/consistent_hash.html">Tom White's Blog</a>.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../../../org/gridgain/grid/spi/loadbalancing/affinity/GridAffinityLoadBalancingSpiMBean.html#getVirtualNodeCount()">getVirtualNodeCount</A></CODE> in interface <CODE><A HREF="../../../../../../org/gridgain/grid/spi/loadbalancing/affinity/GridAffinityLoadBalancingSpiMBean.html" title="interface in org.gridgain.grid.spi.loadbalancing.affinity">GridAffinityLoadBalancingSpiMBean</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>Number of virtual nodes.</DL>
</DD>
</DL>
<HR>

<A NAME="setVirtualNodeCount(int)"><!-- --></A><H3>
setVirtualNodeCount</H3>
<PRE>
<FONT SIZE="-1"><A HREF="../../../../../../org/gridgain/grid/spi/GridSpiConfiguration.html" title="annotation in org.gridgain.grid.spi">@GridSpiConfiguration</A>(<A HREF="../../../../../../org/gridgain/grid/spi/GridSpiConfiguration.html#optional()">optional</A>=true)
</FONT>public void <B>setVirtualNodeCount</B>(int&nbsp;virtualNodeCnt)</PRE>
<DL>
<DD>Sets number of virtual nodes for Consistent Hashing algorithm. Generally, the larger
 the virtual node count, the more even the data affinity distribution is across nodes.
 The value should generally be larger than <code>500</code>. The default value of <code>1000</code>
 is good enough for most grid deployments. Consistent Hashing generally yields between
 2% and 4% standard deviation for equal data affinity distribution. If you set the value
 too large (larger than several thousands), it may cause performance degradation
 <p>
 You can use virtual node count to distribute load in uneven grid. The larger the
 virtual node count is, the more data will be stored on that node which leads to more jobs
 sent to that node. Hence, nodes that have higher Memory or CPU capacity should have larger
 virtual node count value.
 <p>
 For example, if you have 3 nodes in the grid: N1, N2, and N3, and nodes N1 and N2 have 2GB of
 memory and node N3 has 3GB of memory, then, to ease up calculations, for every 1GB of memory
 on a node you could assign 500 virtual nodes. As a result, nodes N1 and N2 should be assigned
 <code>1000</code> virtual nodes and node N3 should be assigned <code>1500</code> virtual nodes.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>virtualNodeCnt</CODE> - Weight of the node.</DL>
</DD>
</DL>
<HR>

<A NAME="getAffinityNodeAttributes()"><!-- --></A><H3>
getAffinityNodeAttributes</H3>
<PRE>
public <A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</A><span class='angle_bracket'>&lt;</span><A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>,? extends <A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/io/Serializable.html?is-external=true" title="class or interface in java.io">Serializable</A><span class='angle_bracket'>&gt;</span> <B>getAffinityNodeAttributes</B>()</PRE>
<DL>
<DD>Gets map of node attributes for nodes that should participate in affinity assignment.
 Only nodes that have this attributes set will be included.
 <p>
 Default value is <code>null</code> which means all nodes will be added.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../../../org/gridgain/grid/spi/loadbalancing/affinity/GridAffinityLoadBalancingSpiMBean.html#getAffinityNodeAttributes()">getAffinityNodeAttributes</A></CODE> in interface <CODE><A HREF="../../../../../../org/gridgain/grid/spi/loadbalancing/affinity/GridAffinityLoadBalancingSpiMBean.html" title="interface in org.gridgain.grid.spi.loadbalancing.affinity">GridAffinityLoadBalancingSpiMBean</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>Map of node attributes.</DL>
</DD>
</DL>
<HR>

<A NAME="setAffinityNodeAttributes(java.util.Map)"><!-- --></A><H3>
setAffinityNodeAttributes</H3>
<PRE>
<FONT SIZE="-1"><A HREF="../../../../../../org/gridgain/grid/spi/GridSpiConfiguration.html" title="annotation in org.gridgain.grid.spi">@GridSpiConfiguration</A>(<A HREF="../../../../../../org/gridgain/grid/spi/GridSpiConfiguration.html#optional()">optional</A>=true)
</FONT>public void <B>setAffinityNodeAttributes</B>(<A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</A><span class='angle_bracket'>&lt;</span><A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>,? extends <A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/io/Serializable.html?is-external=true" title="class or interface in java.io">Serializable</A><span class='angle_bracket'>&gt;</span>&nbsp;affAttrs)</PRE>
<DL>
<DD>Sets node attributes for data affinity grid segment. All nodes that want to participate
 in affinity load balancing should have these attributes. This is useful when grid is
 segmented, for example, into clients and servers, and client nodes will never cache any data.
 <p>
 Default value is <code>null</code>, which means that all nodes will
 be included.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>affAttrs</CODE> - Map of node attributes for affinity load balancing.</DL>
</DD>
</DL>
<HR>

<A NAME="getNodeAttributes()"><!-- --></A><H3>
getNodeAttributes</H3>
<PRE>
public <A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</A><span class='angle_bracket'>&lt;</span><A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>,<A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A><span class='angle_bracket'>&gt;</span> <B>getNodeAttributes</B>()
                                     throws <A HREF="../../../../../../org/gridgain/grid/spi/GridSpiException.html" title="class in org.gridgain.grid.spi">GridSpiException</A></PRE>
<DL>
<DD>This method is called before SPI starts (before method <A HREF="../../../../../../org/gridgain/grid/spi/GridSpi.html#spiStart(java.lang.String)"><CODE>GridSpi.spiStart(String)</CODE></A>
 is called). It allows SPI implementation to add attributes to a local
 node. Kernel collects these attributes from all SPI implementations
 loaded up and then passes it to discovery SPI so that they can be
 exchanged with other nodes.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../../../org/gridgain/grid/spi/GridSpi.html#getNodeAttributes()">getNodeAttributes</A></CODE> in interface <CODE><A HREF="../../../../../../org/gridgain/grid/spi/GridSpi.html" title="interface in org.gridgain.grid.spi">GridSpi</A></CODE><DT><B>Overrides:</B><DD><CODE><A HREF="../../../../../../org/gridgain/grid/spi/GridSpiAdapter.html#getNodeAttributes()">getNodeAttributes</A></CODE> in class <CODE><A HREF="../../../../../../org/gridgain/grid/spi/GridSpiAdapter.html" title="class in org.gridgain.grid.spi">GridSpiAdapter</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../../../org/gridgain/grid/spi/GridSpiException.html" title="class in org.gridgain.grid.spi">GridSpiException</A></CODE> - Throws in case of any error.
<DT><B>Returns:</B><DD>Map of local node attributes this SPI wants to add.</DL>
</DD>
</DL>
<HR>

<A NAME="getAffinitySeed()"><!-- --></A><H3>
getAffinitySeed</H3>
<PRE>
public <A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A> <B>getAffinitySeed</B>()</PRE>
<DL>
<DD>Gets affinity seed used by Consistent Hashing algorithm.
 By default this seed is empty string.
 <p>
 Whenever starting multiple instances of this SPI, you should make
 sure that every instance has a different seed to achieve different
 affinity assignment. Otherwise, affinity assignment for different
 instances of this SPI will be identical, which defeats the purpose
 of starting multiple affinity load balancing SPI's altogether.
 <p>
 <b>Note that affinity seed must be identical for corresponding
 instances of this SPI on all nodes.</b> If this is not the case,
 then different nodes will calculate affinity differently which may
 result in multiple nodes responsible for the same affinity key.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../../../org/gridgain/grid/spi/loadbalancing/affinity/GridAffinityLoadBalancingSpiMBean.html#getAffinitySeed()">getAffinitySeed</A></CODE> in interface <CODE><A HREF="../../../../../../org/gridgain/grid/spi/loadbalancing/affinity/GridAffinityLoadBalancingSpiMBean.html" title="interface in org.gridgain.grid.spi.loadbalancing.affinity">GridAffinityLoadBalancingSpiMBean</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>Non-null value for affinity seed.</DL>
</DD>
</DL>
<HR>

<A NAME="setAffinitySeed(java.lang.String)"><!-- --></A><H3>
setAffinitySeed</H3>
<PRE>
public void <B>setAffinitySeed</B>(<A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;affSeed)</PRE>
<DL>
<DD>Sets affinity seed used by Consistent Hashing algorithm.
 By default this seed is empty string.
 <p>
 Whenever starting multiple instances of this SPI, you should make
 sure that every instance has a different seed to achieve different
 affinity assignment. Otherwise, affinity assignment for different
 instances of this SPI will be identical, which defeats the purpose
 of starting multiple affinity load balancing SPI's altogether.
 <p>
 <b>Note that affinity seed must be identical for corresponding
 instances of this SPI on all nodes.</b> If this is not the case,
 then different nodes will calculate affinity differently which may
 result in multiple nodes responsible for the same affinity key.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>affSeed</CODE> - Non-null value for affinity seed.</DL>
</DD>
</DL>
<HR>

<A NAME="spiStart(java.lang.String)"><!-- --></A><H3>
spiStart</H3>
<PRE>
public void <B>spiStart</B>(<FONT SIZE="-1" class='nullable'>@Nullable</FONT>
                     <A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;gridName)
              throws <A HREF="../../../../../../org/gridgain/grid/spi/GridSpiException.html" title="class in org.gridgain.grid.spi">GridSpiException</A></PRE>
<DL>
<DD>This method is called to start SPI. After this method returns
 successfully kernel assumes that SPI is fully operational.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../../../org/gridgain/grid/spi/GridSpi.html#spiStart(java.lang.String)">spiStart</A></CODE> in interface <CODE><A HREF="../../../../../../org/gridgain/grid/spi/GridSpi.html" title="interface in org.gridgain.grid.spi">GridSpi</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../../../org/gridgain/grid/spi/GridSpiException.html" title="class in org.gridgain.grid.spi">GridSpiException</A></CODE> - Throws in case of any error during SPI start.<DT><B>Parameters:</B><DD><CODE>gridName</CODE> - Name of grid instance this SPI is being started for
    (<code>null</code> for default grid).</DL>
</DD>
</DL>
<HR>

<A NAME="spiStop()"><!-- --></A><H3>
spiStop</H3>
<PRE>
public void <B>spiStop</B>()
             throws <A HREF="../../../../../../org/gridgain/grid/spi/GridSpiException.html" title="class in org.gridgain.grid.spi">GridSpiException</A></PRE>
<DL>
<DD>This method is called to stop SPI. After this method returns kernel
 assumes that this SPI is finished and all resources acquired by it
 are released.
 <p>
 <b>
 Note that this method can be called at any point including during
 recovery of failed start. It should make no assumptions on what state SPI
 will be in when this method is called.
 </b>
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../../../org/gridgain/grid/spi/GridSpi.html#spiStop()">spiStop</A></CODE> in interface <CODE><A HREF="../../../../../../org/gridgain/grid/spi/GridSpi.html" title="interface in org.gridgain.grid.spi">GridSpi</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../../../org/gridgain/grid/spi/GridSpiException.html" title="class in org.gridgain.grid.spi">GridSpiException</A></CODE> - Thrown in case of any error during SPI stop.</DL>
</DD>
</DL>
<HR>

<A NAME="onContextInitialized(org.gridgain.grid.spi.GridSpiContext)"><!-- --></A><H3>
onContextInitialized</H3>
<PRE>
public void <B>onContextInitialized</B>(<A HREF="../../../../../../org/gridgain/grid/spi/GridSpiContext.html" title="interface in org.gridgain.grid.spi">GridSpiContext</A>&nbsp;spiCtx)
                          throws <A HREF="../../../../../../org/gridgain/grid/spi/GridSpiException.html" title="class in org.gridgain.grid.spi">GridSpiException</A></PRE>
<DL>
<DD>Callback invoked when SPI context is initialized. SPI implementation
 may store SPI context for future access.
 <p>
 This method is invoked after <A HREF="../../../../../../org/gridgain/grid/spi/GridSpi.html#spiStart(java.lang.String)"><CODE>GridSpi.spiStart(String)</CODE></A> method is
 completed, so SPI should be fully functional at this point. Use this
 method for post-start initialization, such as subscribing a discovery
 listener, sending a message to remote node, etc...
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../../../org/gridgain/grid/spi/GridSpi.html#onContextInitialized(org.gridgain.grid.spi.GridSpiContext)">onContextInitialized</A></CODE> in interface <CODE><A HREF="../../../../../../org/gridgain/grid/spi/GridSpi.html" title="interface in org.gridgain.grid.spi">GridSpi</A></CODE><DT><B>Overrides:</B><DD><CODE><A HREF="../../../../../../org/gridgain/grid/spi/GridSpiAdapter.html#onContextInitialized(org.gridgain.grid.spi.GridSpiContext)">onContextInitialized</A></CODE> in class <CODE><A HREF="../../../../../../org/gridgain/grid/spi/GridSpiAdapter.html" title="class in org.gridgain.grid.spi">GridSpiAdapter</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../../../org/gridgain/grid/spi/GridSpiException.html" title="class in org.gridgain.grid.spi">GridSpiException</A></CODE> - If context initialization failed (grid will be stopped).<DT><B>Parameters:</B><DD><CODE>spiCtx</CODE> - Spi context.</DL>
</DD>
</DL>
<HR>

<A NAME="onContextDestroyed()"><!-- --></A><H3>
onContextDestroyed</H3>
<PRE>
public void <B>onContextDestroyed</B>()</PRE>
<DL>
<DD>Callback invoked prior to stopping grid before SPI context is destroyed.
 Once this method is complete, grid will begin shutdown sequence. Use this
 callback for de-initialization logic that may involve SPI context. Note that
 invoking SPI context after this callback is complete is considered
 illegal and may produce unknown results.
 <p>
 If <A HREF="../../../../../../org/gridgain/grid/spi/GridSpiAdapter.html" title="class in org.gridgain.grid.spi"><CODE>GridSpiAdapter</CODE></A> is used for SPI implementation, then it will
 replace actual context with dummy no-op context which is usually good-enough
 since grid is about to shut down.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../../../org/gridgain/grid/spi/GridSpi.html#onContextDestroyed()">onContextDestroyed</A></CODE> in interface <CODE><A HREF="../../../../../../org/gridgain/grid/spi/GridSpi.html" title="interface in org.gridgain.grid.spi">GridSpi</A></CODE><DT><B>Overrides:</B><DD><CODE><A HREF="../../../../../../org/gridgain/grid/spi/GridSpiAdapter.html#onContextDestroyed()">onContextDestroyed</A></CODE> in class <CODE><A HREF="../../../../../../org/gridgain/grid/spi/GridSpiAdapter.html" title="class in org.gridgain.grid.spi">GridSpiAdapter</A></CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getBalancedNode(org.gridgain.grid.GridTaskSession, java.util.List, org.gridgain.grid.GridJob)"><!-- --></A><H3>
getBalancedNode</H3>
<PRE>
public <A HREF="../../../../../../org/gridgain/grid/GridNode.html" title="interface in org.gridgain.grid">GridNode</A> <B>getBalancedNode</B>(<A HREF="../../../../../../org/gridgain/grid/GridTaskSession.html" title="interface in org.gridgain.grid">GridTaskSession</A>&nbsp;ses,
                                <A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</A><span class='angle_bracket'>&lt;</span><A HREF="../../../../../../org/gridgain/grid/GridNode.html" title="interface in org.gridgain.grid">GridNode</A><span class='angle_bracket'>&gt;</span>&nbsp;top,
                                <A HREF="../../../../../../org/gridgain/grid/GridJob.html" title="interface in org.gridgain.grid">GridJob</A>&nbsp;job)
                         throws <A HREF="../../../../../../org/gridgain/grid/GridException.html" title="class in org.gridgain.grid">GridException</A></PRE>
<DL>
<DD>Gets balanced node for specified job within given task session.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../../../org/gridgain/grid/spi/loadbalancing/GridLoadBalancingSpi.html#getBalancedNode(org.gridgain.grid.GridTaskSession, java.util.List, org.gridgain.grid.GridJob)">getBalancedNode</A></CODE> in interface <CODE><A HREF="../../../../../../org/gridgain/grid/spi/loadbalancing/GridLoadBalancingSpi.html" title="interface in org.gridgain.grid.spi.loadbalancing">GridLoadBalancingSpi</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../../../org/gridgain/grid/GridException.html" title="class in org.gridgain.grid">GridException</A></CODE> - If failed to get next balanced node.<DT><B>Parameters:</B><DD><CODE>ses</CODE> - Grid task session for currently executing task.<DD><CODE>top</CODE> - Topology of task nodes from which to pick the best balanced node for given job.<DD><CODE>job</CODE> - Job for which to pick the best balanced node.
<DT><B>Returns:</B><DD>Best balanced node for the given job within given task session.</DL>
</DD>
</DL>
<HR>

<A NAME="getConsistentAttributeNames()"><!-- --></A><H3>
getConsistentAttributeNames</H3>
<PRE>
protected <A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</A><span class='angle_bracket'>&lt;</span><A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A><span class='angle_bracket'>&gt;</span> <B>getConsistentAttributeNames</B>()</PRE>
<DL>
<DD>Returns back a list of attributes that should be consistent
 for this SPI. Consistency means that remote node has to
 have the same attribute with the same value.
<P>
<DD><DL>
<DT><B>Overrides:</B><DD><CODE><A HREF="../../../../../../org/gridgain/grid/spi/GridSpiAdapter.html#getConsistentAttributeNames()">getConsistentAttributeNames</A></CODE> in class <CODE><A HREF="../../../../../../org/gridgain/grid/spi/GridSpiAdapter.html" title="class in org.gridgain.grid.spi">GridSpiAdapter</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>List or attribute names.</DL>
</DD>
</DL>
<HR>

<A NAME="toString()"><!-- --></A><H3>
toString</H3>
<PRE>
public <A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A> <B>toString</B>()</PRE>
<DL>
<DD>
<P>
<DD><DL>
<DT><B>Overrides:</B><DD><CODE><A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</A></CODE> in class <CODE><A target='jse5javadoc' HREF="http://java.sun.com/j2se/1.6.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A></CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/GridAffinityLoadBalancingSpi.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>

                    
                        GridGain&#153; 3.1.1c
                        <br>
                        Community Edition
                    
                </EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../../org/gridgain/grid/spi/loadbalancing/affinity/GridAffinityJobAdapter.html" title="class in org.gridgain.grid.spi.loadbalancing.affinity"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../../../org/gridgain/grid/spi/loadbalancing/affinity/GridAffinityLoadBalancingSpiMBean.html" title="interface in org.gridgain.grid.spi.loadbalancing.affinity"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../../index.html?org/gridgain/grid/spi/loadbalancing/affinity/GridAffinityLoadBalancingSpi.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="GridAffinityLoadBalancingSpi.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

                    
                        <table width="100%" border="0">
                        <tr>
                            <td>
                                GridGain = High Performance Cloud Computing
                                <br>
                                <nobr>Community Edition, <strong>ver. 3.1.1c</strong>.05062011</nobr>
                                <br>
                                <a target=_blank href="http://www.gridgain.com"><nobr>2005-2011 Copyright &#169; GridGain Systems, Inc.</nobr></a>
                            </td>
                            <td width="100%" align="center" valign="center">
                                <table border=0>
                                <tr>
                                    <td>
                                        <nobr>Follow us:&nbsp;&nbsp;</nobr>
                                    </td>
                                    <td style="padding-right: 5px">
                                        <a target=facebook class='img_link' href='http://www.facebook.com/profile.php?id=6458239494'>
                                            <img border=0 align=absmiddle src='http://www.gridgain.com/images/facebook_small.png'>
                                        </a>
                                    </td>
                                    <td>
                                        <a class='img_link' target=meetup href='http://www.meetup.com/GridGain-Bay-Area-Meetup-Group'>
                                            <img border=0 align=absmiddle src='http://www.gridgain.com/images/meetup_logo_small.png' alt='Join GridGain User Group'/>
                                        </a>
                                    </td>
                                     <td>
                                        <a class='img_link' target=twitter href='http://www.twitter.com/gridgain'>
                                            <img border=0 align=absmiddle src='http://www.gridgain.com/images/twitter.gif' alt='Follow GridGain on Twitter'/>
                                        </a>
                                    </td>
                                     <td>
                                        <a class='img_link' target=youtube href='http://www.youtube.com/user/gridgain'>
                                            <img border=0 align=absmiddle src='http://www.gridgain.com/images/youtube_small.png' alt='Follow GridGain on YouTube'/>
                                        </a>
                                    </td>
                                </tr>
                                </table>
                            </td>
                            <td align="right" valign="center" style="padding-right: 15px; padding-top: 5px">
                                <a class="img-link" target=_blank href="http://www.gridgainsystems.com/wiki/display/GG15UG/License">
                                    <img border="0" src="http://www.gridgain.org/images/gplv3.gif">
                                </a>
                            </td>
                            <td align="right" valign="center">
                                <a class="img-link" target=_blank href="http://www.gridgain.com">
                                    <img border="0" src="http://www.gridgain.com/images/logo2_bw_no_ver.gif">
                                </a>
                            </td>
                        </tr>
                        </table>
                    
                
<!--FOOTER--><script type='text/javascript'>SyntaxHighlighter.all();dp.SyntaxHighlighter.HighlightAll('code');</script>
</body>

</HTML>
